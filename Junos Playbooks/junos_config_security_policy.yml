---
- name: Configure Security Policy On a Firewall
  hosts: juniper1
  connection: local
  gather_facts: no

  tasks:

    - name: Configure a Secuirty Policy on a Firewall
      junipernetworks.junos.junos_security_policies:
        config:
          from_zones:
            - name: one
              to_zones:
                - name: two
                  policies:
                    - description: test_policy
                    - match:
                        application:
                          names:
                            - junos-http
                            - junos-https
                        destination_address:
                          address:
                            - address1
                            - address2
                        from_zone:
                          names:
                            - trust
                        source_address:
                          address:
                            - address3
                            - address4
                        to_zone:
                          names:
                            - untrust
                      name: 111
                      then:
                        count: true
                        deny: false
                        log: session-close
